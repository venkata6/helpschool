--
-- PostgreSQL database dump
--

-- Dumped from database version 12.1
-- Dumped by pg_dump version 12.1

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: helpschool; Type: SCHEMA; Schema: -; Owner: postgres
--

CREATE SCHEMA helpschool;


ALTER SCHEMA helpschool OWNER TO postgres;

SET default_tablespace = '';

SET default_table_access_method = heap;

--
-- Name: countries; Type: TABLE; Schema: helpschool; Owner: postgres
--

CREATE TABLE helpschool.countries (
    country_id uuid NOT NULL,
    name character varying(255) NOT NULL COLLATE pg_catalog."en-US-x-icu",
    created_date timestamp with time zone DEFAULT now() NOT NULL,
    modified_date timestamp with time zone DEFAULT now()
);


ALTER TABLE helpschool.countries OWNER TO postgres;

--
-- Name: districts; Type: TABLE; Schema: helpschool; Owner: postgres
--

CREATE TABLE helpschool.districts (
    district_id uuid NOT NULL,
    state_id uuid NOT NULL,
    name character varying(512) NOT NULL,
    govt_id character varying(1024),
    extra_info jsonb,
    created_date timestamp with time zone DEFAULT now() NOT NULL,
    modified_date timestamp with time zone DEFAULT now()
);


ALTER TABLE helpschool.districts OWNER TO postgres;

--
-- Name: school_supplies; Type: TABLE; Schema: helpschool; Owner: postgres
--

CREATE TABLE helpschool.school_supplies (
    school_id uuid NOT NULL,
    supply_id uuid NOT NULL,
    quantity integer DEFAULT 0 NOT NULL,
    created_date timestamp with time zone DEFAULT now() NOT NULL,
    modified_date timestamp with time zone DEFAULT now()
);


ALTER TABLE helpschool.school_supplies OWNER TO postgres;

--
-- Name: schools; Type: TABLE; Schema: helpschool; Owner: postgres
--

CREATE TABLE helpschool.schools (
    school_id uuid NOT NULL,
    district_id uuid NOT NULL,
    name character varying(512) NOT NULL,
    govt_id character varying(1024),
    extra_info jsonb,
    created_date timestamp with time zone DEFAULT now() NOT NULL,
    modified_date time with time zone DEFAULT now()
);


ALTER TABLE helpschool.schools OWNER TO postgres;

--
-- Name: states; Type: TABLE; Schema: helpschool; Owner: postgres
--

CREATE TABLE helpschool.states (
    state_id uuid NOT NULL,
    name character varying(512) NOT NULL COLLATE pg_catalog."en_US.UTF-8",
    country_id uuid NOT NULL,
    govt_id character varying(1024),
    extra_info jsonb,
    created_date timestamp with time zone DEFAULT now() NOT NULL,
    modified_date timestamp with time zone DEFAULT now()
);


ALTER TABLE helpschool.states OWNER TO postgres;

--
-- Name: supplies; Type: TABLE; Schema: helpschool; Owner: postgres
--

CREATE TABLE helpschool.supplies (
    supply_id uuid NOT NULL,
    title character varying(1024) NOT NULL,
    url character varying(4096) NOT NULL,
    description character varying(4096),
    extra_info jsonb,
    created_date timestamp with time zone NOT NULL,
    modified_date timestamp with time zone
);


ALTER TABLE helpschool.supplies OWNER TO postgres;

--
-- Name: countries countries_pkey; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.countries
    ADD CONSTRAINT countries_pkey PRIMARY KEY (country_id);


--
-- Name: countries country_id; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.countries
    ADD CONSTRAINT country_id UNIQUE (country_id);


--
-- Name: districts district_pkey; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.districts
    ADD CONSTRAINT district_pkey PRIMARY KEY (district_id);


--
-- Name: states name_country_id; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.states
    ADD CONSTRAINT name_country_id UNIQUE (country_id, name);


--
-- Name: districts name_state_id; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.districts
    ADD CONSTRAINT name_state_id UNIQUE (state_id, name);


--
-- Name: schools school_pkey; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.schools
    ADD CONSTRAINT school_pkey PRIMARY KEY (school_id);


--
-- Name: school_supplies school_supplies_pkey; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.school_supplies
    ADD CONSTRAINT school_supplies_pkey PRIMARY KEY (school_id, supply_id);


--
-- Name: states states_pkey; Type: CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.states
    ADD CONSTRAINT states_pkey PRIMARY KEY (state_id);


--
-- Name: fki_countries_province; Type: INDEX; Schema: helpschool; Owner: postgres
--

CREATE INDEX fki_countries_province ON helpschool.states USING btree (country_id);


--
-- Name: states country_state; Type: FK CONSTRAINT; Schema: helpschool; Owner: postgres
--

ALTER TABLE ONLY helpschool.states
    ADD CONSTRAINT country_state FOREIGN KEY (country_id) REFERENCES helpschool.countries(country_id) ON UPDATE RESTRICT ON DELETE RESTRICT;


--
-- PostgreSQL database dump complete
--

